@import "tailwindcss";
@import "../../vendor/livewire/flux/dist/flux.css";

@source '../views';
@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';
@source '../../vendor/livewire/flux-pro/stubs/**/*.blade.php';
@source '../../vendor/livewire/flux/stubs/**/*.blade.php';

@custom-variant dark (&:where(.dark, .dark *));

@theme {
    --font-sans: "Instrument Sans", ui-sans-serif, system-ui, sans-serif,
        "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
        "Noto Color Emoji";

    --color-zinc-50: #fafafa;
    --color-zinc-100: #f5f5f5;
    --color-zinc-200: #e5e5e5;
    --color-zinc-300: #d4d4d4;
    --color-zinc-400: #a3a3a3;
    --color-zinc-500: #737373;
    --color-zinc-600: #525252;
    --color-zinc-700: #404040;
    --color-zinc-800: #262626;
    --color-zinc-900: #171717;
    --color-zinc-950: #0a0a0a;

    --color-accent: var(--color-neutral-800);
    --color-accent-content: var(--color-neutral-800);
    --color-accent-foreground: var(--color-white);
}

@layer theme {
    .dark {
        --color-accent: var(--color-white);
        --color-accent-content: var(--color-white);
        --color-accent-foreground: var(--color-neutral-800);
    }
}

@layer base {
    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        border-color: var(--color-gray-200, currentColor);
    }
}

[data-flux-field]:not(ui-radio, ui-checkbox) {
    @apply grid gap-2;
}

[data-flux-label] {
    @apply !mb-0 !leading-tight;
}

input:focus[data-flux-control],
textarea:focus[data-flux-control],
select:focus[data-flux-control] {
    @apply outline-hidden ring-2 ring-accent ring-offset-2 ring-offset-accent-foreground;
}

/* \[:where(&)\]:size-4 {
    @apply size-4;
} */

/* Custom styles for create post page */
.create-post-container {
    @apply max-w-4xl mx-auto;
}

.media-upload-area {
    @apply transition-all duration-200;
}

.media-upload-area:hover {
    @apply border-gray-400 bg-gray-50;
}

.media-upload-area.dragover {
    @apply border-gray-500 bg-gray-100;
}

.character-counter {
    @apply transition-colors duration-200;
}

.character-counter.warning {
    @apply text-orange-500;
}

.character-counter.danger {
    @apply text-red-500 dark:text-red-400;
}

/* Smooth animations */
.fade-in {
    animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Focus states */
textarea:focus {
    @apply ring-2 ring-gray-900 dark:ring-zinc-400 ring-offset-2;
}

/* Button hover effects */
.btn-primary {
    @apply transition-all duration-200 transform;
}

.btn-primary:hover {
    @apply scale-105 shadow-lg;
}

.btn-secondary {
    @apply transition-all duration-200;
}

.btn-secondary:hover {
    @apply bg-gray-200 dark:bg-zinc-600;
}

/* Dark mode specific styles for create post */
.dark .media-upload-area:hover {
    @apply border-zinc-500 bg-zinc-700;
}

.dark .media-upload-area.dragover {
    @apply border-zinc-400 bg-zinc-600;
}

/* Dark mode form validation */
.dark textarea:invalid {
    @apply border-red-400;
}

.dark textarea:focus:invalid {
    @apply ring-red-400;
}

/* Media preview responsive styles */
#media-preview {
    @apply flex justify-center items-center;
}

#preview-image,
#preview-video {
    @apply transition-all duration-300 ease-in-out;
    @apply shadow-lg;
}

/* Ensure preview container centers content properly */
#media-preview > div {
    @apply flex justify-center items-center w-full;
}

/* Responsive preview sizing */
@media (max-width: 640px) {
    #preview-image,
    #preview-video {
        @apply max-h-80;
    }
}

@media (min-width: 641px) {
    #preview-image,
    #preview-video {
        @apply max-h-96;
    }
}

/* Portrait images/videos get more height */
.portrait-preview {
    @apply max-h-[500px] w-auto;
}

/* Landscape images/videos get standard height */
.landscape-preview {
    @apply max-h-96 w-full;
}

/* Square images/videos get fixed height */
.square-preview {
    @apply h-96 max-h-96 w-96 max-w-full;
}

/* Ensure proper centering for all preview types */
#media-preview .portrait-preview,
#media-preview .landscape-preview,
#media-preview .square-preview {
    @apply mx-auto;
}

/* Add subtle background for better visibility */
#media-preview {
    @apply bg-gray-50 dark:bg-zinc-800 rounded-xl p-4;
}

/* Smooth fade-in animation for preview */
#media-preview.fade-in {
    animation: fadeInPreview 0.3s ease-in-out;
}

@keyframes fadeInPreview {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* Delete button transitions */
#remove-media-btn {
    @apply transition-all duration-200 ease-in-out;
}

#remove-media-btn.hidden {
    @apply opacity-0 pointer-events-none;
}

#remove-media-btn:not(.hidden) {
    @apply opacity-100 pointer-events-auto;
}

/* Loading overlay styles */
#loading-overlay {
    backdrop-filter: blur(4px);
}

#loading-overlay .animate-spin {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

/* Snackbar styles */
#success-snackbar,
#error-snackbar {
    @apply transition-all duration-300 ease-in-out;
}

#success-snackbar {
    @apply bg-green-500 hover:bg-green-600;
}

#error-snackbar {
    @apply bg-red-500 hover:bg-red-600;
}

/* Form disabled state */
#create-post-form:has(input:disabled) {
    @apply opacity-75;
}

#create-post-form input:disabled,
#create-post-form textarea:disabled,
#create-post-form button:disabled {
    @apply cursor-not-allowed;
}

/* Shimmer loading animation for search page images */
@keyframes shimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

.shimmer {
    background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.2) 20%,
        rgba(255, 255, 255, 0.5) 60%,
        rgba(255, 255, 255, 0) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

.dark .shimmer {
    background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.1) 20%,
        rgba(255, 255, 255, 0.2) 60%,
        rgba(255, 255, 255, 0) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

/* Image loading states */
.image-loading {
    @apply opacity-0 transition-opacity duration-300;
}

.image-loaded {
    @apply opacity-100;
}

.image-error {
    @apply opacity-50;
}

/* Video loading states */
.video-loading {
    @apply opacity-0 transition-opacity duration-300;
}

.video-loaded {
    @apply opacity-100;
}

/* Hover effects for media */
.media-hover-overlay {
    @apply absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all duration-300 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100;
}

/* Responsive image containers */
.image-container {
    @apply relative w-full aspect-[4/3] bg-zinc-100 dark:bg-zinc-800 rounded-lg overflow-hidden;
}

.video-container {
    @apply relative w-full aspect-[16/9] bg-zinc-100 dark:bg-zinc-800 rounded-lg overflow-hidden;
}

/* Loading spinner for media */
.media-loading-spinner {
    @apply absolute inset-0 bg-zinc-200 dark:bg-zinc-700 flex items-center justify-center;
}

.media-loading-spinner svg {
    @apply w-8 h-8 text-zinc-400 animate-spin;
}

/* Line clamp utilities for grid cards */
.line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Grid card hover effects */
.grid-card {
    @apply transition-all duration-300 hover:scale-[1.02] hover:shadow-lg;
}

/* Responsive grid adjustments */
@media (max-width: 768px) {
    .grid-cols-1 {
        @apply grid-cols-1;
    }
}

@media (min-width: 768px) and (max-width: 1024px) {
    .md\:grid-cols-2 {
        @apply grid-cols-2;
    }
}

@media (min-width: 1024px) and (max-width: 1280px) {
    .lg\:grid-cols-3 {
        @apply grid-cols-3;
    }
}

@media (min-width: 1280px) {
    .xl\:grid-cols-4 {
        @apply grid-cols-4;
    }
}

/* Video autoplay enhancements */
.video-autoplay {
    @apply transition-all duration-300 ease-in-out;
    @apply cursor-pointer;
}

.video-autoplay:hover {
    @apply scale-[1.02];
}

.video-autoplay.loading {
    @apply opacity-80;
}

.video-autoplay.playing {
    @apply opacity-100;
}

/* Video container improvements */
.video-container {
    @apply relative overflow-hidden rounded-lg;
    @apply bg-gradient-to-br from-blue-400 via-purple-500 to-pink-500;
}

.video-container::before {
    content: "";
    @apply absolute inset-0 bg-black/10 pointer-events-none;
    @apply transition-opacity duration-300;
}

.video-container:hover::before {
    @apply opacity-0;
}

/* Video controls styling */
.video-autoplay::-webkit-media-controls {
    @apply opacity-0 transition-opacity duration-300;
}

.video-autoplay:hover::-webkit-media-controls {
    @apply opacity-100;
}

/* Video loading state */
.video-loading-overlay {
    @apply absolute inset-0 bg-zinc-200 dark:bg-zinc-700;
    @apply flex items-center justify-center;
    @apply transition-opacity duration-300;
}

.video-loading-overlay.hidden {
    @apply opacity-0 pointer-events-none;
}

/* Video play button overlay */
.video-play-overlay {
    @apply absolute inset-0 bg-black/20;
    @apply flex items-center justify-center;
    @apply transition-all duration-300;
    @apply opacity-0 pointer-events-none;
}

.video-autoplay:hover .video-play-overlay {
    @apply opacity-100;
}

.video-play-button {
    @apply w-16 h-16 bg-white/90 dark:bg-zinc-800/90;
    @apply rounded-full flex items-center justify-center;
    @apply shadow-lg hover:shadow-xl;
    @apply transition-all duration-300;
}

.video-play-button:hover {
    @apply scale-110 bg-white dark:bg-zinc-800;
}

/* Smooth video transitions */
.video-autoplay {
    @apply transform-gpu;
}

/* Performance optimizations */
.video-autoplay {
    will-change: transform, opacity;
}

/* Mobile video optimizations */
@media (max-width: 768px) {
    .video-autoplay {
        @apply transform-none;
    }

    .video-autoplay:hover {
        @apply scale-100;
    }
}
